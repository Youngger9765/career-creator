# 週報 - 2025年9月30日

## 本週完成：即時同步功能

### 測試環境

- **Staging URL**: <https://career-creator-frontend-staging-990202338378.asia-east1.run.app>

---

## 0. 前置作業

### 準備測試環境

1. **開啟兩個不同瀏覽器**（例如：Chrome + Edge 或 Chrome + Safari）
2. **瀏覽器 A（諮詢師）**：
   - 進入 staging URL
   - 登入諮詢師帳號
   - 建立新房間
   - 複製分享連結
3. **瀏覽器 B（訪客）**：
   - 貼上分享連結
   - 輸入訪客名稱加入房間
4. **確認連線**：
   - 檢查 Header 右側顯示兩個頭像
   - 確認雙方都看到相同畫面

---

## 1. Header 同步功能測試

### 在線狀態顯示

**測試步驟：**

1. 諮詢師創建房間
2. 訪客透過分享連結加入
3. 檢查 Header 右側是否顯示兩個頭像
4. 訪客關閉瀏覽器，頭像應在 3 秒內消失
5. 訪客重新加入，頭像應立即出現

**預期結果：**

- ✅ 即時顯示在線人數
- ✅ 滑鼠移到頭像顯示名稱
- ✅ 離線自動清理

---

## 2. 遊戲模式同步測試

### 模式切換同步

**測試步驟：**

1. 諮詢師選擇「職能盤點卡」
2. 訪客畫面應自動切換到相同模式
3. 諮詢師切換玩法（如：生涯盤點 → 職位分解）
4. 訪客畫面應同步切換
5. 諮詢師離開，訪客畫面會被屏蔽，等待咨詢師回來才自動解鎖

**預期結果：**

- ✅ 模式自動同步
- ✅ 訪客無法主動切換模式
- ✅ 切換時保留已放置的卡片

---

## 3. 七大玩法同步測試

### 【職游旅人卡】

#### 3.1 六大性格分析（PersonalityAnalysisGame）

**測試重點：**

- 3x3 網格佈局（RIASEC 六角模型）
- 格子間移動卡片
- **雙方皆可自由拖曳卡片**

**操作：**

1. 諮詢師拖卡到中心格 → 訪客看到同步
2. 訪客拖卡到角落格 → 諮詢師看到同步
3. 每格最多 5 張限制測試

#### 3.2 職能收集家（CareerCollectorGame）

**測試重點：**

- 單一收集區
- 最多收集 15 張
- **雙方皆可自由拖曳卡片**

**操作：**

1. 諮詢師持續加入卡片 → 訪客看到同步
2. 訪客移除任意卡片 → 諮詢師看到同步
3. 測試 15 張上限

### 【職能盤點卡】

#### 3.3 優劣勢分析（AdvantageAnalysisGame）

**測試重點：**

- 三欄式佈局（喜歡/擅長/價值）
- 跨欄移動卡片
- **雙方皆可自由拖曳卡片**

**操作：**

1. 諮詢師拖卡到「喜歡」欄 → 訪客看到同步
2. 訪客從「喜歡」移到「擅長」→ 諮詢師看到同步
3. 每欄最多 10 張限制測試

#### 3.4 成長規劃（GrowthPlanningGame）

**測試重點：**

- 技能卡 + 行動卡組合
- **雙方皆可選擇卡片**
- **文字輸入同步（僅諮詢師能編輯）**
- 自動前綴功能

**操作：**

1. 諮詢師選技能卡 → 訪客看到同步
2. 訪客選行動卡 → 諮詢師看到同步
3. 諮詢師輸入計畫文字 → 訪客即時看到（訪客無法編輯）
4. 檢查前綴格式：`【技能卡: XXX | 行動卡: XXX】`

#### 3.5 職位拆解（PositionBreakdownGame）

**測試重點：**

- 拖曳卡片到 6 個不同職位格
- 移除卡片功能
- **雙方皆可自由拖曳卡片**

**操作：**

1. 諮詢師拖卡到職位 1 → 訪客看到同步
2. 訪客拖卡到職位 2 → 諮詢師看到同步
3. 雙方都可點擊 X 移除卡片 → 即時同步

### 【價值導航卡】

#### 3.6 價值觀排序（ValueRankingGame）

**測試重點：**

- 拖曳排序功能
- 順序即時同步
- **雙方皆可自由調整排序**

**操作：**

1. 諮詢師調整排序 → 訪客看到新順序
2. 訪客調整排序 → 諮詢師看到新順序
3. 測試前 10 名排序

#### 3.7 生活改造王（LifeTransformationGame）

**測試重點：**

- 拖曳卡片到生活領域
- 雙方皆可拖曳卡片**
- 籌碼分配
- 圓餅圖即時同步更新

**操作：**

1. 諮詢師拖卡片到「健康」領域 → 訪客看到同步
2. 訪客拖卡片到「工作」領域 → 諮詢師看到同步
3. 調整「健康」籌碼到 30 → 都能看到數字更新+圓餅圖同步變化
4. 調整「工作」籌碼到 20 → 都能看到數字更新+圓餅圖同步變化
5. 檢查總和 100 點限制（超過時自動調整其他領域）
6. 確認圓餅圖顯示與籌碼分配一致

---

## 4. 拖曳視覺回饋測試

### 跨瀏覽器拖曳提示

**測試步驟：**

1. 諮詢師開始拖曳卡片
2. 訪客應看到半透明卡片跟隨
3. 訪客開始拖曳
4. 諮詢師應看到視覺提示

**預期結果：**

- ✅ 拖曳中的卡片顯示為半透明
- ✅ 顯示拖曳者名稱
- ✅ 拖曳結束後恢復正常

---

## 5. 異常情況測試

### 網路中斷恢復

1. 斷開網路 30 秒
2. 重新連接
3. 檢查狀態是否自動恢復

### 多人同時操作

1. 兩人同時拖曳不同卡片
2. 兩人同時拖曳同一張卡片
3. 檢查最後操作優先原則

---

## 已知問題

1. **極少數情況下同步延遲** - 重新整理頁面可解決
2. **大量卡片快速移動時可能掉幀** - 不影響最終同步結果

---

## 下週重點

1. 修復現有測試套件
2. 優化同步效能
3. 加入錯誤重試機制

---

## 測試建議

請使用 Chrome/Edge 最新版本，確保網路穩定
