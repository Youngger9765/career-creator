# Environment Setup Guide

## ç’°å¢ƒé…ç½®æŒ‡å—

æœ¬å°ˆæ¡ˆæ”¯æ´å¤šç’°å¢ƒé…ç½®ï¼Œå¯ä»¥è¼•é¬†åœ¨æœ¬åœ°é–‹ç™¼å’Œ Supabase ç’°å¢ƒé–“åˆ‡æ›ã€‚

## ç’°å¢ƒæª”æ¡ˆèªªæ˜

### `.env` (é è¨­é–‹ç™¼ç’°å¢ƒ)
- ä½¿ç”¨æœ¬åœ° PostgreSQL è³‡æ–™åº«
- ç”¨æ–¼ä¸€èˆ¬é–‹ç™¼å·¥ä½œ
- å¿«é€Ÿå•Ÿå‹•ï¼Œç„¡éœ€ç¶²è·¯é€£ç·š

### `.env.local` (æœ¬åœ°é–‹ç™¼ç’°å¢ƒ)
- åŒæ¨£ä½¿ç”¨æœ¬åœ° PostgreSQL
- å‚™ç”¨çš„æœ¬åœ°ç’°å¢ƒé…ç½®

### `.env.staging` (Supabase æ¸¬è©¦ç’°å¢ƒ)
- é€£æ¥åˆ° Supabase é›²ç«¯è³‡æ–™åº«
- ç”¨æ–¼æ¸¬è©¦é›²ç«¯éƒ¨ç½²åŠŸèƒ½
- éœ€è¦ç¶²è·¯é€£ç·š

## å¦‚ä½•åˆ‡æ›ç’°å¢ƒ

### æ–¹æ³• 1: è¤‡è£½ç’°å¢ƒæª”æ¡ˆ
```bash
# ä½¿ç”¨æœ¬åœ°è³‡æ–™åº«
cp .env.local .env

# ä½¿ç”¨ Supabase
cp .env.staging .env
```

### æ–¹æ³• 2: ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æŒ‡å®š
```bash
# æœ¬åœ°é–‹ç™¼
export ENV_FILE=".env.local"
python app/main.py

# Supabase ç’°å¢ƒ
export ENV_FILE=".env.staging"
python app/main.py
```

## æ¸¬è©¦é€£ç·š

### æ¸¬è©¦æœ¬åœ°è³‡æ–™åº«
```bash
# ç¢ºä¿æœ¬åœ° PostgreSQL æ­£åœ¨é‹è¡Œ
# ä½¿ç”¨é è¨­ .env é…ç½®
python test_db_connection.py
```

### æ¸¬è©¦ Supabase
```bash
# å°ˆé–€æ¸¬è©¦ Supabase é€£ç·š
python test_supabase.py
```

## è³‡æ–™åº«é·ç§»

### æœ¬åœ°ç’°å¢ƒ
```bash
# ä½¿ç”¨æœ¬åœ°è³‡æ–™åº«é…ç½®
alembic upgrade head
```

### Supabase ç’°å¢ƒ
```bash
# åˆ‡æ›åˆ° Supabase é…ç½®
cp .env.staging .env
alembic upgrade head
# åˆ‡æ›å›æœ¬åœ°é…ç½®
cp .env.local .env
```

## å®‰å…¨æ€§æ³¨æ„äº‹é …

- âœ… `.env.example` - ç¯„ä¾‹æª”æ¡ˆï¼Œå¯ä»¥æäº¤åˆ° Git
- âŒ `.env*` - å¯¦éš›ç’°å¢ƒæª”æ¡ˆï¼Œå·²åœ¨ `.gitignore` ä¸­æ’é™¤
- ğŸ”’ æ‰€æœ‰å¯†ç¢¼å’Œé‡‘é‘°éƒ½ä¸æ‡‰æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶

## éƒ¨ç½²å»ºè­°

- **é–‹ç™¼éšæ®µ**: ä½¿ç”¨ `.env.local` (æœ¬åœ° PostgreSQL)
- **æ¸¬è©¦éšæ®µ**: ä½¿ç”¨ `.env.staging` (Supabase)
- **ç”Ÿç”¢ç’°å¢ƒ**: ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æˆ–å¯†é‘°ç®¡ç†æœå‹™