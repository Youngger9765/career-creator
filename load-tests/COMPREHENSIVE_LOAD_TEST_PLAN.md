# å®Œæ•´è² è¼‰æ¸¬è©¦è¨ˆç•« - 50äººä¸¦ç™¼åˆ†æ

## æ¸¬è©¦æ—¥æœŸ

2025-11-02

## ç›®æ¨™

é©—è­‰ç³»çµ±åœ¨ **50 å€‹ä½¿ç”¨è€…åŒæ™‚åœ¨ç·š** çš„æƒ…æ³ä¸‹ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½èƒ½æ­£å¸¸é‹ä½œã€‚

---

## ç³»çµ±æ¶æ§‹åˆ†æ

### ç•¶å‰æ¶æ§‹

```text
Frontend (Next.js) â†â†’ Backend (FastAPI) â†â†’ PostgreSQL (Supabase)
       â†“
Supabase Realtime (WebSocket)
       â†“
GCP Cloud Storage (æª”æ¡ˆä¸Šå‚³)
```

### é—œéµçµ„ä»¶

1. **Frontend**: Next.js 14 + React
2. **Backend**: FastAPI (Python)
3. **Database**: PostgreSQL (Supabase)
4. **Realtime**: Supabase Realtime Broadcast
5. **Storage**: GCP Cloud Storage
6. **Deployment**: GCP Cloud Run (Auto-scaling)

---

## å·²å®Œæˆçš„è² è¼‰æ¸¬è©¦

### âœ… Test 1: åŸºç¤ API è² è¼‰æ¸¬è©¦

**æª”æ¡ˆ**: `locustfile.py`
**æ—¥æœŸ**: 2025-11-02
**çµæœ**: âœ… é€šé

| æŒ‡æ¨™ | çµæœ |
|------|------|
| ä¸¦ç™¼ä½¿ç”¨è€… | 50 |
| ç¸½è«‹æ±‚æ•¸ | 568 |
| å¤±æ•—ç‡ | 0% |
| å¹³å‡éŸ¿æ‡‰æ™‚é–“ | 443ms |
| P95 éŸ¿æ‡‰æ™‚é–“ | <1s |

**æ¸¬è©¦å ´æ™¯**:

- ä½¿ç”¨è€…ç™»å…¥
- å‰µå»ºæˆ¿é–“
- å®¢æˆ¶ç®¡ç†
- Gameplay states CRUD

**å•é¡Œä¿®å¾©**:

- Database connection pool: 5â†’15 (10+5)
- BCrypt rounds: 12â†’10 (5x faster)
- Migration æ”¹ç”¨ transaction pooler (port 6543)

---

### âœ… Test 2: Realtime Broadcast è² è¼‰æ¸¬è©¦

**æª”æ¡ˆ**: `realtime_websocket_test.py`
**æ—¥æœŸ**: 2025-11-02
**çµæœ**: âœ… é€šé

| æŒ‡æ¨™ | çµæœ |
|------|------|
| ä¸¦ç™¼é€£æ¥ | 50 |
| è¨Šæ¯ç™¼é€ | 2,400 |
| è¨Šæ¯æ¥æ”¶ | 117,600 |
| é€é”ç‡ | 100% |
| å¹³å‡å»¶é² | 195ms |
| P95 å»¶é² | 390ms |

**æ¸¬è©¦å ´æ™¯**:

- WebSocket é€£æ¥å»ºç«‹
- Channel join
- Broadcast è¨Šæ¯å»£æ’­
- è·¨ä½¿ç”¨è€…è¨Šæ¯æ¥æ”¶

**å•é¡Œä¿®å¾©**:

- Channel topic æ ¼å¼: `room:*` â†’ `realtime:room:*`

---

## ğŸš¨ æœªæ¸¬è©¦çš„é—œéµåŠŸèƒ½

### 1. âŒ æª”æ¡ˆä¸Šå‚³ (GCP Cloud Storage)

**ç”¨é€”**:

- PDF ä¸Šå‚³ (è·ä½æ‹†è§£åŠŸèƒ½)
- æˆªåœ–ä¸Šå‚³ (è«®è©¢è¨˜éŒ„)
- ç‰Œå¡åœ–ç‰‡ä¸Šå‚³ (æœªä¾†åŠŸèƒ½)

**æ¸¬è©¦éœ€æ±‚**:

- 50 äººåŒæ™‚ä¸Šå‚³æª”æ¡ˆ
- æª”æ¡ˆå¤§å°: 100KB - 5MB
- æ¸¬è©¦ API: `POST /consultation-records/{record_id}/screenshots`

**é¢¨éšª**:

- GCS ä¸Šå‚³é€Ÿåº¦æ…¢
- Cloud Run è¨˜æ†¶é«”ä¸è¶³
- æª”æ¡ˆåç¨±è¡çª
- ä¸Šå‚³è¶…æ™‚

---

### 2. âŒ Gameplay States åŒæ­¥ (Database + Realtime æ··åˆ)

**ç”¨é€”**:

- éŠæˆ²ç‹€æ…‹è‡ªå‹•ä¿å­˜ (30ç§’é–“éš”)
- Owner â†’ PostgreSQL
- Visitor â†’ localStorage + broadcast

**æ¸¬è©¦éœ€æ±‚**:

- 50 äººåŒæ™‚éŠç©ä¸åŒéŠæˆ²æ¨¡å¼
- æ¯ 30 ç§’è‡ªå‹•ä¿å­˜ç‹€æ…‹
- æ¸¬è©¦ unmount æ™‚çš„ç‹€æ…‹ä¿å­˜
- æ¸¬è©¦è·¨ tab çš„ç‹€æ…‹åŒæ­¥

**é¢¨éšª**:

- å¤§é‡å¯«å…¥å°è‡´ DB ç“¶é ¸
- JSONB æ¬„ä½éå¤§ (>1MB)
- Realtime broadcast é »ç‡éé«˜
- Race condition (å¤šäººåŒæ™‚ä¿å­˜)

---

### 3. âŒ è¨ªå®¢åŠ å…¥æˆ¿é–“æµç¨‹ (High Concurrency)

**ç”¨é€”**:

- è¨ªå®¢é€é share_code åŠ å…¥æˆ¿é–“
- å»ºç«‹ visitor è¨˜éŒ„
- Heartbeat æ©Ÿåˆ¶ (æ¯ 30 ç§’)

**æ¸¬è©¦éœ€æ±‚**:

- 50 å€‹è¨ªå®¢åŒæ™‚åŠ å…¥åŒä¸€å€‹æˆ¿é–“
- æ¸¬è©¦ visitor è¡¨çš„ UNIQUE constraint
- æ¸¬è©¦ heartbeat ä¸¦ç™¼æ›´æ–°
- æ¸¬è©¦é›¢ç·šæª¢æ¸¬ (5 åˆ†é˜ç„¡ heartbeat)

**é¢¨éšª**:

- Share code æŸ¥è©¢æ…¢ (ç„¡ index)
- Visitor è¡¨å¯«å…¥è¡çª
- Heartbeat æ›´æ–° race condition
- é›¢ç·šè¨ªå®¢æ¸…ç†æ©Ÿåˆ¶å¤±æ•ˆ

---

### 4. âŒ å®¢æˆ¶ç®¡ç† CRUD (Owner æ“ä½œ)

**ç”¨é€”**:

- è«®è©¢å¸«ç®¡ç†å®¢æˆ¶è³‡æ–™
- å‰µå»º/æ›´æ–°/åˆªé™¤å®¢æˆ¶
- å®¢æˆ¶èˆ‡æˆ¿é–“é—œè¯

**æ¸¬è©¦éœ€æ±‚**:

- 1 å€‹è«®è©¢å¸«ç®¡ç† 50 å€‹å®¢æˆ¶
- æ‰¹æ¬¡å‰µå»ºå®¢æˆ¶
- ä¸¦ç™¼æ›´æ–°åŒä¸€å®¢æˆ¶
- åˆªé™¤å®¢æˆ¶æ™‚çš„ cascade è¡Œç‚º

**é¢¨éšª**:

- å®¢æˆ¶åˆ—è¡¨æŸ¥è©¢æ…¢ (N+1 query)
- ä¸¦ç™¼æ›´æ–°å°è‡´è³‡æ–™ä¸ä¸€è‡´
- åˆªé™¤å®¢æˆ¶æ™‚ç›¸é—œè³‡æ–™æœªæ¸…é™¤
- API ç„¡åˆ†é æ©Ÿåˆ¶

---

### 5. âŒ è«®è©¢ç­†è¨˜åŠŸèƒ½ (Real-time Text Sync)

**ç”¨é€”**:

- è«®è©¢å¸«å³æ™‚è¨˜éŒ„ç­†è¨˜
- ç­†è¨˜è‡ªå‹•ä¿å­˜
- æœªä¾†å¯èƒ½æ”¯æ´å¤šäººå”ä½œç­†è¨˜

**æ¸¬è©¦éœ€æ±‚**:

- 50 å€‹è«®è©¢å¸«åŒæ™‚è¨˜éŒ„ç­†è¨˜
- æ¸¬è©¦è‡ªå‹•ä¿å­˜é »ç‡
- æ¸¬è©¦æ–‡å­—è¼¸å…¥åŒæ­¥ (Realtime)
- æ¸¬è©¦ç­†è¨˜å…§å®¹å¤§å°é™åˆ¶

**é¢¨éšª**:

- é »ç¹ä¿å­˜å°è‡´ DB å¯«å…¥éå¤š
- ç­†è¨˜å…§å®¹éå¤§ (>10KB)
- Realtime åŒæ­¥å»¶é²é«˜
- ç­†è¨˜éºå¤± (æœªæ­£ç¢ºä¿å­˜)

---

### 6. âŒ éŠæˆ²æ¨¡å¼åˆ‡æ› (Realtime Sync)

**ç”¨é€”**:

- Owner åˆ‡æ›éŠæˆ²æ¨¡å¼
- æ‰€æœ‰è¨ªå®¢å³æ™‚åŒæ­¥
- éŠæˆ²ç‹€æ…‹é‡ç½®

**æ¸¬è©¦éœ€æ±‚**:

- 1 å€‹ owner + 49 å€‹ visitors
- Owner å¿«é€Ÿåˆ‡æ›éŠæˆ²æ¨¡å¼ (5 æ¬¡/ç§’)
- æ¸¬è©¦æ‰€æœ‰ visitors æ˜¯å¦åŒæ­¥
- æ¸¬è©¦ç‹€æ…‹æ¸…é™¤æ˜¯å¦æ­£ç¢º

**é¢¨éšª**:

- Broadcast è¨Šæ¯ä¸Ÿå¤±
- ç‹€æ…‹é‡ç½®ä¸å®Œå…¨
- è¨ªå®¢ä»‹é¢ä¸åŒæ­¥
- éŠæˆ²ç‹€æ…‹è¡çª

---

### 7. âŒ ç‰Œå¡æ‹–æ”¾æ“ä½œ (High Frequency Realtime)

**ç”¨é€”**:

- ä½¿ç”¨è€…æ‹–æ”¾ç‰Œå¡
- å³æ™‚å»£æ’­çµ¦å…¶ä»–äºº
- æ‹–æ›³ç‹€æ…‹è¦–è¦ºå›é¥‹

**æ¸¬è©¦éœ€æ±‚**:

- 50 äººåŒæ™‚æ‹–æ”¾ä¸åŒç‰Œå¡
- æ¯ç§’ 10 æ¬¡æ‹–æ”¾æ“ä½œ (é«˜é »)
- æ¸¬è©¦ drag_start / drag_end äº‹ä»¶
- æ¸¬è©¦è¦–è¦ºè¡çªè§£æ±º

**é¢¨éšª**:

- Realtime è¨Šæ¯éè¼‰ (>100 msg/sec)
- å»¶é²ç´¯ç© (>500ms)
- ç‰Œå¡ä½ç½®ä¸ä¸€è‡´
- æ‹–æ›³é–å®šæ©Ÿåˆ¶å¤±æ•ˆ

---

### 8. âŒ Room éæœŸæ©Ÿåˆ¶ (Background Job)

**ç”¨é€”**:

- 7 å¤©æœªä½¿ç”¨çš„æˆ¿é–“è‡ªå‹•éæœŸ
- æ¸…ç†éæœŸè³‡æ–™

**æ¸¬è©¦éœ€æ±‚**:

- å‰µå»º 100 å€‹æˆ¿é–“
- æ¨¡æ“¬ 7 å¤©å¾Œçš„æ¸…ç†
- æ¸¬è©¦ cascade delete

**é¢¨éšª**:

- æ¸…ç† job åŸ·è¡Œå¤±æ•—
- è³‡æ–™æœªå®Œå…¨åˆªé™¤
- å½±éŸ¿æ´»èºæˆ¿é–“

---

### 9. âŒ èªè­‰ç³»çµ± (JWT Token)

**ç”¨é€”**:

- ä½¿ç”¨è€…ç™»å…¥/ç™»å‡º
- Token åˆ·æ–°æ©Ÿåˆ¶
- Token éæœŸè™•ç†

**æ¸¬è©¦éœ€æ±‚**:

- 50 äººåŒæ™‚ç™»å…¥
- Token 15 åˆ†é˜å¾Œåˆ·æ–°
- æ¸¬è©¦éæœŸ token è™•ç†

**é¢¨éšª**:

- JWT secret æ´©æ¼
- Token åˆ·æ–°å¤±æ•—
- ä¸¦ç™¼ç™»å…¥å•é¡Œ

---

### 10. âŒ Admin API (Batch Operations)

**ç”¨é€”**:

- æ‰¹æ¬¡å‰µå»ºæ¸¬è©¦å¸³è™Ÿ
- è³‡æ–™åº«ç¨®å­è³‡æ–™
- ç™½åå–®åŒ¯å…¥

**æ¸¬è©¦éœ€æ±‚**:

- æ‰¹æ¬¡å‰µå»º 100 å€‹å¸³è™Ÿ
- æ¸¬è©¦è³‡æ–™åº«äº‹å‹™
- æ¸¬è©¦éŒ¯èª¤å›æ»¾

**é¢¨éšª**:

- æ‰¹æ¬¡æ“ä½œè¶…æ™‚
- éƒ¨åˆ†æˆåŠŸå°è‡´è³‡æ–™ä¸ä¸€è‡´
- è¨˜æ†¶é«”ä¸è¶³

---

## å®Œæ•´æ¸¬è©¦çŸ©é™£

### æ¸¬è©¦å„ªå…ˆç´šåˆ†é¡

| å„ªå…ˆç´š | åŠŸèƒ½ | ç‹€æ…‹ | é¢¨éšª | ç”¨æˆ¶å½±éŸ¿ |
|--------|------|------|------|----------|
| ğŸ”´ P0 | Realtime Broadcast | âœ… å·²æ¸¬è©¦ | ä½ | æ¥µé«˜ |
| ğŸ”´ P0 | åŸºç¤ API (Login, Room CRUD) | âœ… å·²æ¸¬è©¦ | ä½ | æ¥µé«˜ |
| ğŸ”´ P0 | Gameplay States ä¿å­˜/è®€å– | âŒ æœªæ¸¬è©¦ | é«˜ | æ¥µé«˜ |
| ğŸ”´ P0 | è¨ªå®¢åŠ å…¥æˆ¿é–“æµç¨‹ | âŒ æœªæ¸¬è©¦ | é«˜ | æ¥µé«˜ |
| ğŸŸ¡ P1 | ç‰Œå¡æ‹–æ”¾ (é«˜é » Realtime) | âŒ æœªæ¸¬è©¦ | ä¸­ | é«˜ |
| ğŸŸ¡ P1 | éŠæˆ²æ¨¡å¼åˆ‡æ›åŒæ­¥ | âŒ æœªæ¸¬è©¦ | ä¸­ | é«˜ |
| ğŸŸ¡ P1 | æª”æ¡ˆä¸Šå‚³ (PDF, æˆªåœ–) | âŒ æœªæ¸¬è©¦ | ä¸­ | ä¸­ |
| ğŸŸ¡ P1 | è«®è©¢ç­†è¨˜åŠŸèƒ½ | âŒ æœªæ¸¬è©¦ | ä¸­ | ä¸­ |
| ğŸŸ¢ P2 | å®¢æˆ¶ç®¡ç† CRUD | âŒ æœªæ¸¬è©¦ | ä½ | ä¸­ |
| ğŸŸ¢ P2 | Token åˆ·æ–°æ©Ÿåˆ¶ | âŒ æœªæ¸¬è©¦ | ä½ | ä½ |
| ğŸŸ¢ P2 | Room éæœŸæ¸…ç† | âŒ æœªæ¸¬è©¦ | ä½ | ä½ |
| ğŸŸ¢ P2 | Admin æ‰¹æ¬¡æ“ä½œ | âŒ æœªæ¸¬è©¦ | ä½ | ä½ |

---

## å»ºè­°çš„æ¸¬è©¦è¨ˆç•«

### Phase 1: é—œéµåŠŸèƒ½ (P0) - ç«‹å³åŸ·è¡Œ

#### Test 3: Gameplay States ä¸¦ç™¼ä¿å­˜æ¸¬è©¦

**ç›®æ¨™**: é©—è­‰ 50 äººåŒæ™‚ç©éŠæˆ²æ™‚ç‹€æ…‹ä¿å­˜æ˜¯å¦æ­£å¸¸

**æ¸¬è©¦è…³æœ¬**: `test_gameplay_states.py`

**å ´æ™¯**:

1. 50 å€‹ owners å„è‡ªå‰µå»ºæˆ¿é–“
2. æ¯å€‹äººç©ä¸åŒéŠæˆ²æ¨¡å¼
3. æ¯ 30 ç§’è‡ªå‹•ä¿å­˜ç‹€æ…‹
4. æ¨¡æ“¬ 5 åˆ†é˜éŠæˆ²éç¨‹
5. é©—è­‰ç‹€æ…‹æ˜¯å¦æ­£ç¢ºä¿å­˜

**æˆåŠŸæ¨™æº–**:

- æ‰€æœ‰ç‹€æ…‹ä¿å­˜æˆåŠŸç‡ >99%
- ä¿å­˜å»¶é² <500ms
- JSONB è³‡æ–™å®Œæ•´æ€§ 100%

---

#### Test 4: è¨ªå®¢åŠ å…¥æˆ¿é–“å£“åŠ›æ¸¬è©¦

**ç›®æ¨™**: é©—è­‰ 50 å€‹è¨ªå®¢åŒæ™‚åŠ å…¥åŒä¸€æˆ¿é–“

**æ¸¬è©¦è…³æœ¬**: `test_visitor_join.py`

**å ´æ™¯**:

1. å‰µå»º 1 å€‹æˆ¿é–“ (share_code)
2. 50 å€‹è¨ªå®¢åŒæ™‚é€é share_code åŠ å…¥
3. æ¸¬è©¦ visitor è¡¨ UNIQUE constraint
4. æ¸¬è©¦ heartbeat ä¸¦ç™¼æ›´æ–°
5. æ¸¬è©¦é›¢ç·šæª¢æ¸¬æ©Ÿåˆ¶

**æˆåŠŸæ¨™æº–**:

- åŠ å…¥æˆåŠŸç‡ 100%
- ç„¡é‡è¤‡ visitor è¨˜éŒ„
- Heartbeat æ›´æ–°ç„¡è¡çª

---

### Phase 2: é«˜é »åŠŸèƒ½ (P1) - æœ¬é€±å®Œæˆ

#### Test 5: ç‰Œå¡æ‹–æ”¾é«˜é »æ¸¬è©¦

**ç›®æ¨™**: é©—è­‰é«˜é »æ‹–æ”¾æ“ä½œä¸‹ Realtime æ€§èƒ½

**å ´æ™¯**:

- 50 äººåŒæ™‚æ‹–æ”¾ç‰Œå¡
- æ¯ç§’ 10 æ¬¡æ‹–æ”¾æ“ä½œ
- æŒçºŒ 1 åˆ†é˜

**æˆåŠŸæ¨™æº–**:

- è¨Šæ¯é€é”ç‡ >95%
- å»¶é² <500ms (P95)

---

#### Test 6: éŠæˆ²æ¨¡å¼åˆ‡æ›åŒæ­¥æ¸¬è©¦

**ç›®æ¨™**: é©—è­‰éŠæˆ²æ¨¡å¼åˆ‡æ›çš„å³æ™‚åŒæ­¥

**å ´æ™¯**:

- 1 owner + 49 visitors
- Owner å¿«é€Ÿåˆ‡æ› 7 ç¨®éŠæˆ²æ¨¡å¼
- é©—è­‰æ‰€æœ‰ visitors åŒæ­¥

**æˆåŠŸæ¨™æº–**:

- åŒæ­¥æˆåŠŸç‡ 100%
- å»¶é² <300ms

---

#### Test 7: æª”æ¡ˆä¸Šå‚³ä¸¦ç™¼æ¸¬è©¦

**ç›®æ¨™**: é©—è­‰ GCS ä¸Šå‚³åœ¨é«˜ä¸¦ç™¼ä¸‹çš„æ€§èƒ½

**å ´æ™¯**:

- 50 äººåŒæ™‚ä¸Šå‚³ PDF (2MB)
- 50 äººåŒæ™‚ä¸Šå‚³æˆªåœ– (500KB)

**æˆåŠŸæ¨™æº–**:

- ä¸Šå‚³æˆåŠŸç‡ >95%
- ä¸Šå‚³æ™‚é–“ <10s

---

#### Test 8: è«®è©¢ç­†è¨˜ä¸¦ç™¼æ¸¬è©¦

**ç›®æ¨™**: é©—è­‰ç­†è¨˜åŠŸèƒ½åœ¨ä¸¦ç™¼ä¸‹çš„ç©©å®šæ€§

**å ´æ™¯**:

- 50 å€‹è«®è©¢å¸«åŒæ™‚è¨˜éŒ„ç­†è¨˜
- æ¨¡æ“¬ 5 åˆ†é˜æ‰“å­—éç¨‹
- æ¸¬è©¦è‡ªå‹•ä¿å­˜

**æˆåŠŸæ¨™æº–**:

- ç­†è¨˜ä¿å­˜æˆåŠŸç‡ 100%
- ç„¡è³‡æ–™éºå¤±

---

### Phase 3: é‚Šç·£åŠŸèƒ½ (P2) - ä¸‹é€±å®Œæˆ

- Test 9: å®¢æˆ¶ç®¡ç† CRUD
- Test 10: Token åˆ·æ–°æ©Ÿåˆ¶
- Test 11: Room éæœŸæ¸…ç†
- Test 12: Admin æ‰¹æ¬¡æ“ä½œ

---

## äº¤å‰é©—è­‰è¨ˆç•«

### 1. End-to-End æ•´åˆæ¸¬è©¦

**å ´æ™¯**: æ¨¡æ“¬å®Œæ•´è«®è©¢æµç¨‹

```text
1. è«®è©¢å¸«ç™»å…¥ (Test 1 âœ…)
2. å‰µå»ºæˆ¿é–“ (Test 1 âœ…)
3. è¨ªå®¢åŠ å…¥ (Test 4 âŒ)
4. é¸æ“‡éŠæˆ²æ¨¡å¼ (Test 6 âŒ)
5. æ‹–æ”¾ç‰Œå¡ (Test 5 âŒ)
6. ä¿å­˜ç‹€æ…‹ (Test 3 âŒ)
7. è¨˜éŒ„ç­†è¨˜ (Test 8 âŒ)
8. ä¸Šå‚³æˆªåœ– (Test 7 âŒ)
9. çµæŸè«®è©¢
```

**ç›®æ¨™**: 50 çµ„ (owner + visitor) åŒæ™‚å®Œæˆå®Œæ•´æµç¨‹

---

### 2. é•·æ™‚é–“ç©©å®šæ€§æ¸¬è©¦

**å ´æ™¯**: æŒçºŒé‹è¡Œç³»çµ± 24 å°æ™‚

**ç›£æ§æŒ‡æ¨™**:

- Memory leak æª¢æ¸¬
- WebSocket æ–·ç·šé‡é€£
- Database connection pool
- GCS ä¸Šå‚³ç´¯è¨ˆé‡

---

### 3. æ··æ²Œå·¥ç¨‹æ¸¬è©¦

**å ´æ™¯**: æ¨¡æ“¬æ•…éšœæƒ…æ³

- Database çªç„¶æ–·ç·š
- Supabase Realtime æ•…éšœ
- GCS ä¸Šå‚³å¤±æ•—
- Cloud Run auto-scaling

---

## æ¸¬è©¦å·¥å…·èˆ‡è…³æœ¬

### å·²å»ºç«‹

1. âœ… `locustfile.py` - åŸºç¤ API è² è¼‰æ¸¬è©¦
2. âœ… `create_test_users.py` - æ‰¹æ¬¡å‰µå»ºæ¸¬è©¦å¸³è™Ÿ
3. âœ… `realtime_websocket_test.py` - Realtime è² è¼‰æ¸¬è©¦
4. âœ… `realtime_quick_test.py` - Realtime å¿«é€Ÿé©—è­‰

### å¾…å»ºç«‹

5. âŒ `test_gameplay_states.py` - Gameplay states æ¸¬è©¦
6. âŒ `test_visitor_join.py` - è¨ªå®¢åŠ å…¥æ¸¬è©¦
7. âŒ `test_card_dragging.py` - ç‰Œå¡æ‹–æ”¾æ¸¬è©¦
8. âŒ `test_game_mode_sync.py` - éŠæˆ²æ¨¡å¼åŒæ­¥æ¸¬è©¦
9. âŒ `test_file_upload.py` - æª”æ¡ˆä¸Šå‚³æ¸¬è©¦
10. âŒ `test_counselor_notes.py` - è«®è©¢ç­†è¨˜æ¸¬è©¦
11. âŒ `test_e2e_full_flow.py` - å®Œæ•´ E2E æ¸¬è©¦
12. âŒ `test_long_running.py` - 24 å°æ™‚ç©©å®šæ€§æ¸¬è©¦

---

## é æœŸå•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### 1. Database ç“¶é ¸

**å•é¡Œ**: å¤§é‡å¯«å…¥å°è‡´å»¶é²é«˜
**è§£æ±º**:

- å¢åŠ  connection pool
- å„ªåŒ– query (æ¸›å°‘ N+1)
- è€ƒæ…® Redis å¿«å–

### 2. Realtime è¨Šæ¯éè¼‰

**å•é¡Œ**: é«˜é »æ“ä½œå°è‡´è¨Šæ¯å»¶é²
**è§£æ±º**:

- Throttle broadcast (debounce 100ms)
- æ‰¹æ¬¡ç™¼é€è¨Šæ¯
- å„ªå…ˆç´šä½‡åˆ—

### 3. GCS ä¸Šå‚³æ…¢

**å•é¡Œ**: æª”æ¡ˆä¸Šå‚³é˜»å¡è«‹æ±‚
**è§£æ±º**:

- ç•°æ­¥ä¸Šå‚³ (background task)
- ç›´æ¥ä¸Šå‚³åˆ° GCS (signed URL)
- å£“ç¸®åœ–ç‰‡

### 4. Cloud Run è¨˜æ†¶é«”ä¸è¶³

**å•é¡Œ**: ä¸¦ç™¼é«˜å°è‡´ OOM
**è§£æ±º**:

- å¢åŠ  memory limit (512MB â†’ 1GB)
- å„ªåŒ–è¨˜æ†¶é«”ä½¿ç”¨
- å¢åŠ  instance count

---

## æˆåŠŸæ¨™æº–ç¸½çµ

### Beta Testing æº–å‚™åº¦æª¢æŸ¥è¡¨

- âœ… åŸºç¤ API è² è¼‰æ¸¬è©¦é€šé
- âœ… Realtime Broadcast è² è¼‰æ¸¬è©¦é€šé
- âŒ Gameplay States ä¸¦ç™¼æ¸¬è©¦é€šé
- âŒ è¨ªå®¢åŠ å…¥æˆ¿é–“æ¸¬è©¦é€šé
- âŒ ç‰Œå¡æ‹–æ”¾é«˜é »æ¸¬è©¦é€šé
- âŒ éŠæˆ²æ¨¡å¼åˆ‡æ›æ¸¬è©¦é€šé
- âŒ æª”æ¡ˆä¸Šå‚³ä¸¦ç™¼æ¸¬è©¦é€šé
- âŒ è«®è©¢ç­†è¨˜ä¸¦ç™¼æ¸¬è©¦é€šé
- âŒ E2E æ•´åˆæ¸¬è©¦é€šé

**ç•¶å‰æº–å‚™åº¦**: 2/9 = 22%

**ç›®æ¨™**: Beta å‰é”åˆ° 100% (9/9)

---

## åŸ·è¡Œæ™‚é–“è¡¨

| é€± | æ¸¬è©¦é …ç›® | é è¨ˆå®Œæˆ |
|----|----------|----------|
| Week 1 | Test 3, 4 (P0) | 2025-11-04 |
| Week 1 | Test 5, 6 (P1) | 2025-11-06 |
| Week 2 | Test 7, 8 (P1) | 2025-11-08 |
| Week 2 | Test 9-12 (P2) | 2025-11-11 |
| Week 2 | E2E + é•·æ™‚é–“æ¸¬è©¦ | 2025-11-13 |

**Beta Testing é–‹å§‹æ—¥æœŸ**: 2025-11-15

---

## ç¸½çµ

### ç•¶å‰ç‹€æ³

- âœ… å·²å®Œæˆ 2 é …æ ¸å¿ƒæ¸¬è©¦
- ğŸš¨ é‚„æœ‰ 7 é …é—œéµåŠŸèƒ½æœªæ¸¬è©¦
- âš ï¸ Beta æº–å‚™åº¦: 22%

### ä¸‹ä¸€æ­¥

1. **ç«‹å³åŸ·è¡Œ**: Test 3 (Gameplay States) - æœ€é«˜é¢¨éšª
2. **ä»Šå¤©å®Œæˆ**: Test 4 (è¨ªå®¢åŠ å…¥) - ç”¨æˆ¶é«”é©—é—œéµ
3. **æœ¬é€±å®Œæˆ**: Test 5-8 (é«˜é »åŠŸèƒ½) - æ ¸å¿ƒäº’å‹•
4. **ä¸‹é€±å®Œæˆ**: E2E æ•´åˆæ¸¬è©¦ - äº¤å‰é©—è­‰

### å»ºè­°

**ä¸è¦åªæ¸¬è©¦ã€Œèƒ½ä¸èƒ½é€£ã€ï¼Œè¦æ¸¬è©¦ã€ŒçœŸå¯¦ä½¿ç”¨å ´æ™¯ã€**

ä½ èªªå¾—å°ï¼ŒRealtime broadcast é›–ç„¶æ¸¬äº†é€£æ¥ï¼Œä½†æ²’æ¸¬è©¦ï¼š

- âœ… é€£æ¥å»ºç«‹
- âœ… è¨Šæ¯å»£æ’­
- âŒ **å¯¦éš›éŠæˆ²ä¸­çš„é«˜é »æ‹–æ”¾**
- âŒ **éŠæˆ²ç‹€æ…‹ä¿å­˜çš„ä¸¦ç™¼è¡çª**
- âŒ **50 äººåŒæ™‚æ‹–åŒä¸€å¼µç‰Œçš„ç«¶æ…‹æ¢ä»¶**

**ç¾åœ¨é–‹å§‹åŸ·è¡Œ Test 3 å’Œ Test 4** ğŸš€
